# 剧本生成 - 提示词手册

> 本文档为技术开发参考，包含完整的提示词模板和参数说明。

---

## 一、整体生成提示词

### 1.1 整剧生成

```json
{
  "system": "你是一个专业的短剧编剧，擅长将小说改编成专业格式的短剧剧本。",
  "user": "请将以下小说转换成专业格式的短剧剧本。\n\n=== 基础配置 ===\n标题：{title}\n题材：{genre}\n总集数：{total_episodes}\n\n=== 格式模板 ===\n# 短剧剧本：{title}\n\n**题材：** {genre}\n**总集数：** {total_episodes}集\n\n**故事梗概：** 1-2句话概括核心冲突\n\n**人物小传：**\n\n| 角色 | 年龄 | 身份/职业 | 性格特点 | 核心背景 |\n|------|------|-----------|---------|----------|\n| 主角 | xx岁 | xxx | xxx | xxx |\n| 配角1 | xx岁 | xxx | xxx | xxx |\n\n**表演记忆点：**\n\n| 角色 | 性格标签 | 口头禅 | 标志性动作 |\n|------|---------|--------|------------|\n| 主角 | xxx | xxx | xxx |\n| 配角1 | xxx | xxx | xxx |\n\n---\n\n**第1集：标题**\n**核心剧情：** ...\n\n1-1   场景名称     日/夜    内/外\n人物：xxx\n\n▲ 场景描述\n【特写】关键镜头\n人物（情绪）：台词\n【★表演提示】\n\n▲ 切镜\n\n1-2   场景名称     日/夜    内/外\n人物：xxx\n\n...\n\n=== 格式要求 ===\n1. 场次编号：1-1, 1-2, 2-1...（连续递增）\n2. 场景标注：日/夜 + 内/外（必填）\n3. 关键镜头：【特写】+ 描述\n4. 表演提示：【★表演提示】+ 情绪/动作\n5. 转场：【切镜】【黑屏】【字幕：X年后】【闪回】【蒙太奇】\n6. 内心独白：【画外音·人物名】\n7. 配角必须有口头禅和标志性动作\n\n=== 题材侧重点 ===\n{genre}题材关注：{genre_focus}\n\n请直接输出完整剧本。\n\n小说原文：\n{novel_content}"
}
```

### 1.2 分集生成（推荐）

**阶段1：规划结构**

```json
{
  "system": "你是一个专业的短剧结构规划专家。",
  "user": "请分析以下小说，规划{total_episodes}集的剧集结构。\n\n=== 输出格式 ===\n**故事梗概：** 1-2句话\n\n**剧集结构：**\n- 1-X集：...（故事发展阶段）\n- X-Y集：...\n- Y-Z集：...\n\n**分集标题和核心剧情：**\n1. 第1集：标题 | 核心剧情\n2. 第2集：标题 | 核心剧情\n...\n\n=== 结构模板 ===\n- 前1/4：困境/崛起\n- 中间1/2：发展/阻碍/感情升温\n- 后1/4：高潮/反转/结局\n\n小说原文：\n{novel_content}"
}
```

**阶段2：分集创作**

```json
{
  "system": "你是一个专业的短剧编剧。",
  "user": "请根据以下信息，创作第{episode_num}集剧本。\n\n=== 上下文 ===\n**故事梗概：** {synopsis}\n\n**前序预告：** {previous_summary}\n\n=== 第{episode_num}集信息 ===\n标题：{episode_title}\n核心剧情：{core_plot}\n\n**本集人物：**\n{character_brief}\n\n**配角记忆点：**\n{sidekick_marks}\n\n=== 格式要求 ===\n按照规范格式创作本集，至少{scene_count}场。\n使用【特写】标注关键情感镜头。\n使用【★表演提示】标注表演要点。\n使用【切镜】【字幕】等标注转场。\n\n请直接输出第{episode_num}集剧本。"
}
```

---

## 二、优化提示词

### 2.1 格式规范化

```json
{
  "system": "你是一个专业的剧本格式审核专家。",
  "user": "请检查以下剧本的格式问题，并修正：\n\n=== 待检查剧本 ===\n{script}\n\n=== 检查项目 ===\n1. 场次编号是否连续（1-1, 1-2, 2-1...）\n2. 场景标注是否完整（日/夜 + 内/外）\n3. 转场标记是否规范（▲切镜、【字幕】等）\n4. 人物小传和表演记忆点是否存在\n\n=== 输出要求 ===\n如果有问题，输出修正后的完整剧本。\n如果没问题，输出\"格式检查通过\"。\n\n请直接输出结果。"
}
```

### 2.2 表演提示补全

```json
{
  "system": "你是一个专业的剧本表演指导专家。",
  "user": "请检查以下剧本中【★表演提示】的使用情况，补充遗漏的表演要点：\n\n=== 待检查剧本 ===\n{script}\n\n=== 补充原则 ===\n1. 人物情绪发生明显变化时，需要【★表演提示】\n2. 关键台词前后，需要表演提示\n3. 动作戏或有肢体冲突的场景，需要【★表演提示】\n\n=== 情绪类提示 ===\n【★不舍】【★坚定】【★心疼】【★愤怒】【★冷静】【★讽刺】【★绝望】【★释然】\n\n=== 动作类提示 ===\n【★标志性动作】【★护短】【★心虚】【★嚣张】【★自恋】\n\n=== 状态类提示 ===\n【★假装】【★真面目暴露】【★犹豫】【★愧疚】\n\n=== 输出要求 ===\n输出修正后的剧本，只补充【★表演提示】，不修改其他内容。"
}
```

### 2.3 配角记忆点校验

```json
{
  "system": "你是一个专业的剧本角色设计专家。",
  "user": "请检查以下剧本中配角的记忆点设计：\n\n=== 待检查剧本 ===\n{script}\n\n=== 检查项目 ===\n1. 每个重要配角是否有口头禅？\n2. 每个重要配角是否有标志性动作？\n3. 口头禅是否在剧中多次出现？（需≥2次）\n4. 标志性动作是否在剧中多次出现？（需≥2次）\n\n=== 配角清单 ===\n{character_list}\n\n=== 输出要求 ===\n输出校验报告，不需要修改剧本。\n\n报告格式：\n- 合格配角：xxx（原因：口头禅出现x次，标志性动作出现x次）\n- 缺失记忆点配角：xxx（原因）\n- 改进建议：xxx"
}
```

### 2.4 完整优化

```json
{
  "system": "你是一个专业的剧本优化专家。",
  "user": "请对以下剧本进行全面优化：\n\n=== 待优化剧本 ===\n{script}\n\n=== 优化项目 ===\n1. 格式规范化（场次、场景标注、转场）\n2. 表演提示补全\n3. 特写镜头检查\n4. 配角记忆点校验\n5. 台词口语化检查\n\n=== 输出要求 ===\n输出优化后的完整剧本，并在最后附上优化报告：\n\n优化报告：\n- 格式问题修复：x处\n- 表演提示补充：x处\n- 特写镜头补充：x处\n- 配角记忆点补充：x处\n- 其他改进：x处\n\n请直接输出优化后的剧本。"
}
```

---

## 三、辅助提示词

### 3.1 题材推断

```json
{
  "system": "你是一个短剧题材分类专家。",
  "user": "请根据以下小说片段，判断题材类型：\n\n{novel_excerpt}\n\n=== 题材选项 ===\n- 仙侠/玄幻\n- 宅斗/宫斗\n- 甜宠/现代\n- 重生/复仇\n- 穿越\n- 现代都市\n- 豪门\n\n=== 输出要求 ===\n只输出题材类型，如：宅斗/宫斗"
}
```

### 3.2 集数估算

```json
{
  "system": "你是一个短剧结构规划专家。",
  "user": "请根据以下小说的字数，估算适合的集数：\n\n小说字数：{word_count}字\n\n=== 估算标准 ===\n- < 5,000字：3-5集\n- 5,000-15,000字：10-15集\n- 15,000-30,000字：20-30集\n- > 30,000字：建议分批生成\n\n=== 输出要求 ===\n输出估算的集数（仅数字），如：30"
}
```

### 3.3 超长内容摘要

```json
{
  "system": "你是一个短剧编剧，擅长摘要小说。",
  "user": "请将以下小说进行摘要，保留：\n1. 主要角色名称和身份\n2. 核心情节线索\n3. 关键转折点\n4. 结局走向\n\n=== 输出格式 ===\n{\n  \"characters\": [{\"name\": \"角色名\", \"role\": \"身份\"}],\n  \"plot_summary\": \"情节概要...\",\n  \"turning_points\": [\"转折1\", \"转折2\"],\n  \"ending\": \"结局描述\"\n}\n\n小说：\n{novel_content}"
}
```

---

## 四、参数速查

| 变量 | 来源 | 说明 |
|------|------|------|
| `{title}` | 用户输入/提取 | 剧本标题 |
| `{genre}` | 用户输入/推断 | 题材类型 |
| `{genre_focus}` | 配置 | 题材侧重点描述 |
| `{total_episodes}` | 用户输入/估算 | 总集数 |
| `{novel_content}` | 用户输入 | 完整小说原文 |
| `{novel_excerpt}` | 用户输入 | 小说片段（用于推断） |
| `{word_count}` | 计算 | 小说字数 |
| `{synopsis}` | 生成阶段1输出 | 故事梗概 |
| `{previous_summary}` | 生成阶段1输出 | 前序预告 |
| `{script}` | 生成阶段输出 | 待优化的剧本 |
| `{character_list}` | 从剧本提取 | 配角清单 |
| `{episode_num}` | 规划阶段输出 | 当前集数 |
| `{episode_title}` | 规划阶段输出 | 当前集标题 |
| `{core_plot}` | 规划阶段输出 | 当前集核心剧情 |
| `{character_brief}` | 规划阶段输出 | 本集人物简介 |
| `{sidekick_marks}` | 规划阶段输出 | 配角记忆点 |
| `{scene_count}` | 配置 | 每集场次数 |

---

## 五、默认配置

### 5.1 系统参数

```json
{
  "title": "短剧剧本",
  "genre": "都市",
  "total_episodes": 30,
  "scenes_per_episode": 4-6,
  "words_per_scene": 150-300,
  "optimization_level": "standard"  // basic / standard / deep
}
```

### 5.2 优化分级

| 级别 | 包含内容 | 适用场景 |
|------|---------|---------|
| basic | 格式规范化、场次编号修复 | 默认，必选 |
| standard | 基础 + 表演提示补全、特写镜头 | 推荐 |
| deep | 标准 + 配角记忆点补全、台词口语化 | 高要求场景 |

### 5.2 各题材侧重点

| 题材 | 侧重点描述 |
|-----|-----------|
| 仙侠/玄幻 | 修炼升级、法宝灵器、门派恩怨 |
| 宅斗/宫斗 | 心机算计、身份地位、主仆关系 |
| 甜宠/现代 | 感情互动、身份差距、浪漫桥段 |
| 重生/复仇 | 信息差、预知未来、改变命运 |
| 穿越 | 身份错位、古代与现代碰撞 |
| 豪门 | 财产争夺、家族恩怨、身份差距 |
| 现代都市 | 职场、生活、现实情感 |

---

## 六、格式规范速查

### 6.1 场次编号

```
正确：1-1, 1-2, 1-3, 2-1, 2-2...
错误：1-1, 1-3, 1-4, 2-1...（不连续）
```

### 6.2 场景标注

```
正确：1-1   场景名称    日    外
错误：1-1   场景名称    日
```

### 6.3 转场标记

| 标记 | 用途 |
|------|------|
| ▲ 切镜 | 场景切换 |
| ▲ 黑屏 | 重要情节后 |
| 【字幕：X年后】 | 时间跳转 |
| 【闪回】 | 回忆场景 |
| 【蒙太奇】 | 时间流逝 |

### 6.4 镜头标记

| 标记 | 用途 |
|------|------|
| 【特写】 | 关键情感镜头 |
| 【★表演提示】 | 表演要点 |

### 6.5 内心独白

```
【画外音·人物名】或【OS·人物名】
```

### 6.6 表格格式

**重要**：标题与表格之间必须有换行，否则渲染异常。

```
正确：
**人物小传：**

| 角色 | 年龄 | ... |

错误：
**人物小传：**
| 角色 | 年龄 | ... |
```

---

## 七、角色设计要求

### 7.1 反派动机设计

**要求**：每个反派需有清晰的作恶动机，不能仅仅是"坏"。

**动机类型**：
- 利益驱动：财产、地位、权力
- 情感驱动：嫉妒、仇恨、爱而不得
- 生存驱动：自保、被胁迫、不得不为之
- 性格驱动：性格缺陷、成长经历导致

**生成提示词补充**：
```
=== 反派设计要求 ===
确保每个反派角色都有合理的作恶动机，避免无脑反派。
动机需符合角色身份和背景，人物行为需有逻辑。
```

---

## 八、技术注意事项

### 7.1 Token 限制

| 场景 | 建议处理 |
|------|---------|
| 单次生成 | 建议不超过 30,000 字小说 |
| 超长小说 | 建议分批生成或摘要 |
| 规则指令 | 精简，避免冗余 |

### 7.2 长文本漂移

生成过程中可能出现：
- 场次编号不连续
- 格式不规范
- 配角记忆点遗漏

**解决方案**：优化阶段统一修复

### 7.3 优化必选

生成后强烈建议调用优化引擎，格式规范率可提升 20%+

---

## 九、输出示例

### 8.1 剧本输出

```markdown
# 短剧剧本：风前絮

**题材：** 古装宅斗
**总集数：** 30集

**故事梗概：** 丫鬟苏清晏被逼替小姐与姑爷同床三年，求解放时被迫与侯府病弱大公子沈景珩结阴亲，在照顾沈景珩的过程中渐生情愫。

**人物小传：**

| 角色 | 年龄 | 身份/职业 | 性格特点 | 核心背景 |
|------|------|-----------|---------|----------|
| 苏清晏 | 18岁 | 陪嫁丫鬟 | 隐忍坚韧 | 家生子，全家性命握在小姐手中 |
| 沈景珩 | 27岁 | 侯府嫡长子 | 清冷才子 | 幼年被借命，注定早逝 |

**表演记忆点：**

| 角色 | 性格标签 | 口头禅 | 标志性动作 |
|------|---------|--------|------------|
| 苏清晏 | 隐忍坚韧 | "奴婢不敢" | 低眉顺眼 |
| 沈景珩 | 清冷深情 | "你真是……" | 耳根泛红 |

---

**第1集：替身丫鬟**
**核心剧情：** 苏清晏是小姐的陪嫁丫鬟，新婚之夜起便每晚替小姐承受姑爷的宠爱。

1-1   小姐房中    夜    内
人物：小姐  沈昭烈  苏清晏

▲ 烛火摇曳，暖帐低垂。

【画外音·苏清晏】 小姐体弱，侯爷武将出身太过威猛，一连三晚都没能圆房。

沈昭烈（调情）：「怎么磨磨蹭蹭的？」

【★表演提示】苏清晏说谎时目光躲闪，双手交握

...
```

### 8.2 优化报告

```markdown
优化报告：
- 格式问题修复：3处（场次编号补全1处、场景标注补全2处）
- 表演提示补充：5处
- 特写镜头补充：2处
- 配角记忆点补充：1处（云岐口头禅"罢了"）
- 其他改进：无
```
